<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo Ciacollor</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50">
    <nav class="bg-blue-700 p-6 text-white text-center shadow-lg">
        <h1 class="text-3xl font-black italic">CIACOLLOR</h1>
        <p class="text-blue-100 opacity-80">Catálogo Digital de Pinturas</p>
    </nav>

    <div class="container mx-auto p-6">
        <div id="catalog" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>
    </div>

    <script>
        async function loadCatalog() {
            const db = JSON.parse(localStorage.getItem('ciacollor_db')) || {};
            const response = await fetch('data.json');
            const data = await response.json();
            const grid = document.getElementById('catalog');

            data.forEach(p => {
                let variantsHtml = '';
                p.variantes.forEach(v => {
                    const info = db[v.sku_id] || { price: '0.00', stock: true };
                    if(info.stock) {
                        variantsHtml += `
                            <div class="flex justify-between border-b py-2 text-sm">
                                <span>${v.medida}</span>
                                <span class="font-bold text-blue-700">${info.price !== '0.00' ? '$' + info.price : 'Consultar'}</span>
                            </div>`;
                    }
                });

                grid.innerHTML += `
                    <div class="bg-white rounded-2xl shadow-sm border p-6">
                        <span class="text-[10px] bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-bold uppercase">${p.categoria}</span>
                        <h2 class="text-xl font-bold mt-2 text-gray-800">${p.nombre}</h2>
                        <p class="text-gray-500 text-xs my-3 italic">${p.argumento_venta}</p>
                        <div class="my-4">${variantsHtml || '<p class="text-red-500 font-bold">Sin Stock</p>'}</div>
                        <div class="text-[10px] text-gray-400">Rendimiento: ${p.variantes[0].rendimiento.split('(')[0]}</div>
                    </div>`;
            });
        }
        loadCatalog();
    </script>
</body>
</html>
